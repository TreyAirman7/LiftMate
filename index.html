<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#6750A4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="LiftMate">
    <link rel="apple-touch-icon" href="LiftMate.png">
    <link rel="manifest" href="manifest.json">
    <title>LiftMate: Gym Tracking Tool</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/micro-interactions.css">
    <link rel="stylesheet" href="css/icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Material Design App Bar -->
        <div class="app-header">
            <div class="header-content">
                <h1><i class="fas fa-dumbbell"></i> LiftMate</h1>
                <button id="dark-mode-toggle" class="theme-toggle" title="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                </button>
                <button id="theme-toggle" class="theme-toggle" title="Change theme color">
                    <i class="fas fa-palette"></i>
                </button>
            </div>
            
            <!-- Theme Selection Panel -->
            <div id="theme-panel" class="theme-panel">
                <div class="theme-option" data-theme="default">
                    <div class="color-preview purple"></div>
                    <span>Purple (Default)</span>
                </div>
                <div class="theme-option" data-theme="blue">
                    <div class="color-preview blue"></div>
                    <span>Blue</span>
                </div>
                <div class="theme-option" data-theme="green">
                    <div class="color-preview green"></div>
                    <span>Green</span>
                </div>
                <div class="theme-option" data-theme="orange">
                    <div class="color-preview orange"></div>
                    <span>Orange</span>
                </div>
                <div class="theme-option" data-theme="red">
                    <div class="color-preview red"></div>
                    <span>Red</span>
                </div>
                <div class="theme-option" data-theme="teal">
                    <div class="color-preview teal"></div>
                    <span>Teal</span>
                </div>
                <div class="theme-option" data-theme="pink">
                    <div class="color-preview pink"></div>
                    <span>Pink</span>
                </div>
                <div class="theme-option" data-theme="indigo">
                    <div class="color-preview indigo"></div>
                    <span>Indigo</span>
                </div>
                <div class="theme-option" data-theme="amber">
                    <div class="color-preview amber"></div>
                    <span>Amber</span>
                </div>
                <div class="theme-option" data-theme="cyan">
                    <div class="color-preview cyan"></div>
                    <span>Cyan</span>
                </div>
            </div>
        </div>
        
        <!-- Current Workout Tab -->
        <div class="tab-content active" id="current-workout">
            <div class="container">
                <div class="section-header">
                    <div class="title-wrapper">
                        <div class="title-icon"><i class="fas fa-dumbbell"></i></div>
                        <h2>Current Workout</h2>
                    </div>
                </div>
                
                <div class="start-options-container">
                    <div class="start-option" id="template-workout">
                        <div class="option-icon"><i class="fas fa-clipboard-list"></i></div>
                        <h3>Template Workout</h3>
                        <p>Use a saved workout template</p>
                        <button class="action-button" id="use-template">Use Template <i class="fas fa-play"></i></button>
                    </div>
                </div>
                
                <div class="templates-section">
                    <div class="section-header">
                        <div class="title-wrapper">
                            <div class="title-icon"><i class="fas fa-clipboard-list"></i></div>
                            <h2>My Templates</h2>
                        </div>
                        <button class="add-button" id="create-template">
                            <i class="fas fa-plus"></i> New Template
                        </button>
                    </div>
                    
                    <div class="templates-container" id="templates-list">
                        <!-- Templates will be added here dynamically -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Statistics Tab -->
        <div class="tab-content" id="statistics">
            <div class="container">
                <div class="section-header">
                    <div class="title-wrapper">
                        <div class="title-icon"><i class="fas fa-chart-line"></i></div>
                        <h2>Statistics & Analytics</h2>
                    </div>
                </div>
                
                <div class="timeframe-selector">
                    <button class="timeframe-button active" data-timeframe="week">This Week</button>
                    <button class="timeframe-button" data-timeframe="month">This Month</button>
                    <button class="timeframe-button" data-timeframe="year">This Year</button>
                    <button class="timeframe-button" data-timeframe="all">All Time</button>
                </div>
                
                <div class="stats-dashboard">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-dumbbell"></i></div>
                        <div class="stat-content">
                            <h3>Total Workouts</h3>
                            <p class="stat-value" id="total-workouts">0</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                        <div class="stat-content">
                            <h3>Total Duration</h3>
                            <p class="stat-value" id="total-duration">0 hrs</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-calendar-check"></i></div>
                        <div class="stat-content">
                            <h3>Weekly Average</h3>
                            <p class="stat-value" id="avg-per-week">0</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-weight-hanging"></i></div>
                        <div class="stat-content">
                            <h3>Total Weight Lifted</h3>
                            <p class="stat-value" id="total-weight-lifted">0 lbs</p>
                        </div>
                    </div>
                </div>
                
                
                <div class="one-rep-max-calculator">
                    <div class="section-header">
                        <div class="title-wrapper">
                            <div class="title-icon"><i class="fas fa-calculator"></i></div>
                            <h2>One Rep Max Calculator</h2>
                        </div>
                    </div>
                    <div class="orm-container">
                        <div class="orm-input">
                            <label for="orm-exercise-select">Select Exercise:</label>
                            <select id="orm-exercise-select">
                                <option value="">Select an exercise</option>
                                <!-- Exercises will be added here dynamically -->
                            </select>
                        </div>
                        <div class="orm-output">
                            <div class="orm-result-label">Estimated 1RM:</div>
                            <div class="orm-result" id="orm-result">-</div>
                        </div>
                    </div>
                </div>
                
                <div class="personal-records">
                    <div class="section-header">
                        <div class="title-wrapper">
                            <div class="title-icon"><i class="fas fa-trophy"></i></div>
                            <h2>Personal Records</h2>
                        </div>
                    </div>
                    <div class="records-container" id="personal-records-list">
                        <!-- Personal records will be added here dynamically -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Progress Tab -->
        <div class="tab-content" id="progress">
            <div class="container">
                <div class="section-header">
                    <div class="title-wrapper">
                        <div class="title-icon"><i class="fas fa-chart-bar"></i></div>
                        <h2>Progress Tracker</h2>
                    </div>
                </div>
                
                <div class="progress-chart-container">
                    <div class="filters">
                        <div class="filter-group">
                            <label for="exercise-select">Exercise:</label>
                            <select id="exercise-select">
                                <option value="">Select Exercise</option>
                                <!-- Exercises will be added here dynamically -->
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="rep-range-select">Rep Range:</label>
                            <select id="rep-range-select">
                                <option value="all">All</option>
                                <option value="1-5">1-5 (Strength)</option>
                                <option value="6-12">6-12 (Hypertrophy)</option>
                                <option value="13+">13+ (Endurance)</option>
                            </select>
                        </div>
                    </div>
                    
                    <canvas id="progress-chart"></canvas>
                </div>
                
                <div class="weight-tracker">
                    <div class="section-header">
                        <div class="title-wrapper">
                            <div class="title-icon"><i class="fas fa-weight"></i></div>
                            <h2>Body Weight Tracker</h2>
                        </div>
                        <button class="add-button" id="add-weight">
                            <i class="fas fa-plus"></i> Add Entry
                        </button>
                    </div>
                    
                    <div class="weight-chart-container">
                        <canvas id="weight-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Exercises Tab -->
        <div class="tab-content" id="exercises">
            <div class="container">
                <div class="section-header">
                    <div class="title-wrapper">
                        <div class="title-icon"><i class="fas fa-dumbbell"></i></div>
                        <h2>Exercise Library</h2>
                    </div>
                    <button class="add-button" id="add-exercise">
                        <i class="fas fa-plus"></i> Add Exercise
                    </button>
                </div>
                
                <div class="exercise-filters">
                    <input type="text" id="exercise-search" placeholder="Search exercises...">
                    <div class="muscle-filters" id="muscle-filters">
                        <button class="muscle-filter active" data-muscle="all">All</button>
                        <button class="muscle-filter" data-muscle="chest">Chest</button>
                        <button class="muscle-filter" data-muscle="back">Back</button>
                        <button class="muscle-filter" data-muscle="shoulders">Shoulders</button>
                        <button class="muscle-filter" data-muscle="biceps">Biceps</button>
                        <button class="muscle-filter" data-muscle="triceps">Triceps</button>
                        <button class="muscle-filter" data-muscle="forearms">Forearms</button>
                        <button class="muscle-filter" data-muscle="abs">Abs</button>
                        <button class="muscle-filter" data-muscle="legs">Legs</button>
                        <button class="muscle-filter" data-muscle="quads">Quads</button>
                        <button class="muscle-filter" data-muscle="hamstrings">Hamstrings</button>
                        <button class="muscle-filter" data-muscle="glutes">Glutes</button>
                        <button class="muscle-filter" data-muscle="calves">Calves</button>
                        <button class="muscle-filter" data-muscle="traps">Traps</button>
                        <button class="muscle-filter" data-muscle="obliques">Obliques</button>
                        <button class="muscle-filter" data-muscle="neck">Neck</button>
                    </div>
                </div>
                
                <div class="exercises-container" id="exercises-list">
                    <!-- Exercises will be added here dynamically -->
                </div>
            </div>
        </div>
        
        <!-- History Tab -->
        <div class="tab-content" id="history">
            <div class="container">
                <div class="section-header">
                    <div class="title-wrapper">
                        <div class="title-icon"><i class="fas fa-history"></i></div>
                        <h2>Workout History</h2>
                    </div>
                </div>
                
                <div class="history-filters">
                    <div class="date-filter">
                        <button class="date-filter-button active" data-filter="all">All Time</button>
                        <button class="date-filter-button" data-filter="week">This Week</button>
                        <button class="date-filter-button" data-filter="month">This Month</button>
                        <button class="date-filter-button" data-filter="year">This Year</button>
                    </div>
                </div>
                
                <div class="history-list" id="workout-history">
                    <!-- Workout history items will be added here dynamically -->
                </div>
            </div>
        </div>
        
        <!-- Goals Tab -->
        <div class="tab-content" id="goals">
            <div class="container">
                <div class="section-header">
                    <div class="title-wrapper">
                        <div class="title-icon"><i class="fas fa-bullseye"></i></div>
                        <h2>Goals</h2>
                    </div>
                </div>
                
                <!-- Exercise Goals Section -->
                <div class="goals-section">
                    <div class="section-header">
                        <div class="title-wrapper">
                            <div class="title-icon"><i class="fas fa-dumbbell"></i></div>
                            <h3>Exercise Weight Goals (PRs)</h3>
                        </div>
                    </div>
                    
                    <div class="goal-form">
                        <form id="exercise-goal-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <select id="goal-exercise-select" required>
                                        <option value="">Select Exercise</option>
                                        <!-- Exercises will be added here dynamically -->
                                    </select>
                                    <label for="goal-exercise-select">Exercise</label>
                                </div>
                                
                                <div class="form-group">
                                    <input type="number" id="goal-exercise-weight" min="0" step="2.5" required>
                                    <label for="goal-exercise-weight">Target Weight (lbs)</label>
                                </div>
                                
                                <button type="submit" class="button primary">Set Goal</button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="goals-list" id="exercise-goals-list">
                        <!-- Exercise goals will be added here dynamically -->
                    </div>
                </div>
                
                <!-- Gym Visits Goals Section -->
                <div class="goals-section">
                    <div class="section-header">
                        <div class="title-wrapper">
                            <div class="title-icon"><i class="fas fa-calendar-check"></i></div>
                            <h3>Gym Visits Goals</h3>
                        </div>
                    </div>
                    
                    <div class="goal-form">
                        <form id="gym-visits-goal-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <select id="goal-visits-timeframe" required>
                                        <option value="">Select Timeframe</option>
                                        <option value="weekly">Weekly</option>
                                        <option value="monthly">Monthly</option>
                                    </select>
                                    <label for="goal-visits-timeframe">Timeframe</label>
                                </div>
                                
                                <div class="form-group">
                                    <input type="number" id="goal-visits-count" min="1" required>
                                    <label for="goal-visits-count">Target Visits</label>
                                </div>
                                
                                <button type="submit" class="button primary">Set Goal</button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="goals-list" id="gym-visits-goals-list">
                        <!-- Gym visits goals will be added here dynamically -->
                    </div>
                </div>
                
                <!-- Bodyweight Goals Section -->
                <div class="goals-section">
                    <div class="section-header">
                        <div class="title-wrapper">
                            <div class="title-icon"><i class="fas fa-weight"></i></div>
                            <h3>Bodyweight Goal</h3>
                        </div>
                    </div>
                    
                    <div class="goal-form">
                        <form id="bodyweight-goal-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="number" id="goal-bodyweight-target" min="0" step="0.5" required>
                                    <label for="goal-bodyweight-target">Target Weight (lbs)</label>
                                </div>
                                
                                <button type="submit" class="button primary">Set Goal</button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="goals-list" id="bodyweight-goals-list">
                        <!-- Bodyweight goals will be added here dynamically -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Progress Pics Tab -->
        <div class="tab-content" id="progress-pics">
            <div class="container">
                <div class="section-header">
                    <div class="title-wrapper">
                        <div class="title-icon"><i class="fas fa-camera"></i></div>
                        <h2>Progress Pictures</h2>
                    </div>
                    <button class="add-button" id="add-progress-pic">
                        <i class="fas fa-plus"></i> Add Photo
                    </button>
                </div>
                
                <div class="progress-pics-container">
                    <div class="date-filter">
                        <button class="date-filter-button active" data-filter="all">All Time</button>
                        <button class="date-filter-button" data-filter="week">This Week</button>
                        <button class="date-filter-button" data-filter="month">This Month</button>
                        <button class="date-filter-button" data-filter="year">This Year</button>
                    </div>
                    
                    <div class="pics-grid" id="progress-pics-grid">
                        <!-- Progress pics will be added here dynamically -->
                    </div>
                    
                    <div class="empty-state hidden" id="no-pics-message">
                        <i class="fas fa-camera empty-icon"></i>
                        <p>No progress pictures yet. Add your first photo to start tracking your visual progress!</p>
                    </div>
                </div>
                
                <div class="comparison-container">
                    <div class="section-header">
                        <div class="title-wrapper">
                            <div class="title-icon"><i class="fas fa-arrows-alt-h"></i></div>
                            <h2>Before & After Comparison</h2>
                        </div>
                    </div>
                    
                    <div class="comparison-options">
                        <div class="comparison-selection">
                            <label for="before-date">Before:</label>
                            <select id="before-date">
                                <option value="">Select date...</option>
                                <!-- Dates will be added here dynamically -->
                            </select>
                        </div>
                        
                        <div class="comparison-selection">
                            <label for="after-date">After:</label>
                            <select id="after-date">
                                <option value="">Select date...</option>
                                <!-- Dates will be added here dynamically -->
                            </select>
                        </div>
                    </div>
                    
                    <div class="comparison-view">
                        <div class="comparison-image" id="before-image">
                            <div class="image-placeholder">
                                <i class="fas fa-image"></i>
                                <p>Select a "before" date</p>
                            </div>
                        </div>
                        
                        <div class="comparison-image" id="after-image">
                            <div class="image-placeholder">
                                <i class="fas fa-image"></i>
                                <p>Select an "after" date</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Material Design Bottom Navigation -->
        <div class="mobile-nav">
            <button class="nav-button active" data-tab="current-workout">
                <span class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6.5 6.5H3.5C2.95 6.5 2.5 6.95 2.5 7.5V16.5C2.5 17.05 2.95 17.5 3.5 17.5H6.5C7.05 17.5 7.5 17.05 7.5 16.5V7.5C7.5 6.95 7.05 6.5 6.5 6.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M20.5 6.5H17.5C16.95 6.5 16.5 6.95 16.5 7.5V16.5C16.5 17.05 16.95 17.5 17.5 17.5H20.5C21.05 17.5 21.5 17.05 21.5 16.5V7.5C21.5 6.95 21.05 6.5 20.5 6.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M7.5 12H16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M7.5 9H16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M7.5 15H16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </span>
                <span>Workout</span>
            </button>
            <button class="nav-button" data-tab="statistics">
                <span class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 21H3V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M21 6L14 13L10 9L3 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M21 11V6H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </span>
                <span>Stats</span>
            </button>
            <button class="nav-button" data-tab="progress">
                <span class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 21H3V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M7 14H5V19H7V14Z" fill="currentColor"/>
                        <path d="M12 10H10V19H12V10Z" fill="currentColor"/>
                        <path d="M17 6H15V19H17V6Z" fill="currentColor"/>
                    </svg>
                </span>
                <span>Progress</span>
            </button>
            <button class="nav-button" data-tab="exercises">
                <span class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="7" r="2.5" stroke="currentColor" stroke-width="2"/>
                        <path d="M15.5 15C15.5 13.067 13.933 11.5 12 11.5C10.067 11.5 8.5 13.067 8.5 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M8.5 18L6.5 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M15.5 18L17.5 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M12 15V20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M8.5 15H15.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </span>
                <span>Exercises</span>
            </button>
            <button class="nav-button" data-tab="history">
                <span class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 7V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </span>
                <span>History</span>
            </button>
            <button class="nav-button" data-tab="goals">
                <span class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                        <circle cx="12" cy="12" r="6" stroke="currentColor" stroke-width="2"/>
                        <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                        <path d="M18 6L21 3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M18 18L21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M6 6L3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M6 18L3 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </span>
                <span>Goals</span>
            </button>
            <button class="nav-button" data-tab="progress-pics">
                <span class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="3" y="5" width="18" height="14" rx="2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                        <path d="M8 8H8.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </span>
                <span>Pics</span>
            </button>
        </div>
    </div>
    
    <!-- Modals -->
    <!-- Template Selector Modal - Material Design Dialog -->
    <div class="modal" id="template-selector-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Select Workout Template</h2>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="templates-grid" id="template-selector-list">
                    <!-- Templates will be added here dynamically -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Template Creator Modal - Material Design Dialog -->
    <div class="modal" id="template-creator-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="template-creator-title">Create New Template</h2>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <form id="template-form">
                    <div class="form-group">
                        <input type="text" id="template-name" placeholder="E.g., Push Day, Leg Day, Full Body" required>
                        <label for="template-name">Template Name</label>
                    </div>
                    
                    <div class="template-exercises">
                        <h3>Exercises</h3>
                        <div id="template-exercises-list">
                            <!-- Exercises will be added here dynamically -->
                        </div>
                        
                        <div class="add-exercise-container">
                            <button type="button" class="add-exercise-button" id="add-template-exercise">
                                <i class="fas fa-plus"></i> Add Exercise
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="button secondary" id="cancel-template">CANCEL</button>
                        <button type="submit" class="button primary" id="save-template">SAVE</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Add Exercise to Template Modal -->
    <div class="modal" id="add-template-exercise-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Exercise to Template</h2>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <input type="text" id="template-exercise-search" placeholder="Search exercises...">
                    <label for="template-exercise-search">Search Exercise</label>
                </div>
                
                <div class="exercise-list" id="template-exercise-list">
                    <!-- Exercises will be added here dynamically -->
                </div>
                
                <div id="template-exercise-details" class="hidden">
                    <h3 id="template-exercise-name"></h3>
                    
                    <div class="sets-container">
                        <h4>Sets</h4>
                        <div id="template-sets-list">
                            <!-- Sets will be added here dynamically -->
                            <div class="set-item">
                                <div class="set-header">
                                    <span>Set 1</span>
                                    <button type="button" class="remove-set-button hidden">×</button>
                                </div>
                                <div class="set-inputs">
                                    <div class="form-group">
                                        <label for="set-1-reps">Target Reps</label>
                                        <input type="number" id="set-1-reps" class="set-reps" min="1" value="10">
                                    </div>
                                    <div class="form-group">
                                        <label for="set-1-rest">Rest Time (seconds)</label>
                                        <input type="number" id="set-1-rest" class="set-rest" min="0" value="60">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <button type="button" class="add-set-button" id="add-template-set">
                            <i class="fas fa-plus"></i> Add Another Set
                        </button>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="button secondary" id="back-to-exercises">Back</button>
                        <button type="button" class="button primary" id="add-exercise-to-template">Add to Template</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Exercise Modal -->
    <div class="modal" id="exercise-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Exercise</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="exercise-form">
                    <div class="form-group">
                        <input type="text" id="exercise-name" placeholder="E.g., Bench Press, Squat, Deadlift" required>
                        <label for="exercise-name">Exercise Name</label>
                    </div>
                    
                    <div class="form-group">
                        <label>Target Muscles</label>
                        <div class="muscle-checkboxes">
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-chest" value="chest">
                                <label for="muscle-chest">Chest</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-back" value="back">
                                <label for="muscle-back">Back</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-shoulders" value="shoulders">
                                <label for="muscle-shoulders">Shoulders</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-biceps" value="biceps">
                                <label for="muscle-biceps">Biceps</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-triceps" value="triceps">
                                <label for="muscle-triceps">Triceps</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-forearms" value="forearms">
                                <label for="muscle-forearms">Forearms</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-abs" value="abs">
                                <label for="muscle-abs">Abs</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-legs" value="legs">
                                <label for="muscle-legs">Legs</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-quads" value="quads">
                                <label for="muscle-quads">Quads</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-hamstrings" value="hamstrings">
                                <label for="muscle-hamstrings">Hamstrings</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-glutes" value="glutes">
                                <label for="muscle-glutes">Glutes</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-calves" value="calves">
                                <label for="muscle-calves">Calves</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-traps" value="traps">
                                <label for="muscle-traps">Traps</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-obliques" value="obliques">
                                <label for="muscle-obliques">Obliques</label>
                            </div>
                            <div class="muscle-checkbox">
                                <input type="checkbox" id="muscle-neck" value="neck">
                                <label for="muscle-neck">Neck</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="button secondary" id="cancel-exercise">Cancel</button>
                        <button type="submit" class="button primary" id="save-exercise">Save Exercise</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Exercise Detail Modal -->
    <div class="modal" id="exercise-detail-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="detail-exercise-name">Exercise Name</h2>
                <div class="modal-actions">
                    <button class="icon-button" id="edit-exercise">
                        <i class="fas fa-pencil-alt"></i>
                    </button>
                    <button class="icon-button" id="delete-exercise">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="close-modal">&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="exercise-detail-section">
                    <h3>Target Muscles</h3>
                    <div class="muscle-tags" id="detail-muscles">
                        <!-- Muscle tags will be added here dynamically -->
                    </div>
                </div>
                
                <div class="exercise-detail-section">
                    <h3>Personal Records</h3>
                    <div class="exercise-records" id="exercise-records">
                        <!-- Records will be added here dynamically -->
                    </div>
                </div>
                
                <button class="button secondary full-width" id="back-to-exercise-list">Back to Exercises</button>
            </div>
        </div>
    </div>
    
    <!-- Active Template Modal -->
    <div class="modal" id="active-template-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="active-template-name">Template Name</h2>
                <button id="cancel-active-workout" class="icon-button">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="workout-progress">
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="workout-progress-bar"></div>
                    </div>
                    <div class="progress-text">
                        <span id="completed-exercises">0</span>/<span id="total-exercises">0</span> Exercises
                    </div>
                </div>
                
                <div class="active-exercise" id="active-exercise-container">
                    <h3 id="active-exercise-name">Exercise Name</h3>
                    
                    <div class="set-progress" id="set-progress">
                        <!-- Set numbers will be added here dynamically -->
                    </div>
                    
                    <div class="current-set" id="current-set">
                        <h4 id="current-set-number">Set 1 - </h4>
                        <h4 id="target-reps-container"><span id="target-reps">10</span> reps</h4>
                        
                        <form id="set-form">
                            <div class="set-form-inputs">
                                <div class="form-group">
                                    <label for="weight-input">Weight (lbs)</label>
                                    <input type="number" id="weight-input" min="0" step="2.5" required>
                                </div>
                                <div class="form-group">
                                    <label for="reps-input">Reps Completed</label>
                                    <input type="number" id="reps-input" min="0" required>
                                </div>
                            </div>
                            
                            <button type="submit" class="button primary full-width">Complete Set</button>
                        </form>
                    </div>
                    
                    <div class="rest-timer hidden" id="rest-timer">
                        <h4>Rest Time</h4>
                        <div class="timer-time" id="timer-display">00:60</div>
                        <button class="button secondary full-width" id="skip-rest">Skip Rest</button>
                    </div>
                </div>
                
                <div class="workout-complete hidden" id="workout-complete">
                    <div class="complete-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3>Workout completed! 💪</h3>
                    <button class="button primary full-width" id="finish-workout">Finish Workout</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Weight Entry Modal -->
    <div class="modal" id="add-weight-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Weight Entry</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="weight-form">
                    <div class="form-group">
                        <input type="number" id="weight-value" min="0" step="0.1" required>
                        <label for="weight-value">Weight (lbs)</label>
                    </div>
                    
                    <div class="form-group">
                        <input type="date" id="weight-date" required>
                        <label for="weight-date">Date</label>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="button secondary" id="cancel-weight">CANCEL</button>
                        <button type="submit" class="button primary" id="save-weight">SAVE</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Confirmation Modal -->
    <div class="modal" id="confirmation-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="confirmation-title">Confirm Action</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirmation-message">Are you sure you want to perform this action?</p>
                
                <div class="form-actions">
                    <button type="button" class="button secondary" id="cancel-confirmation">CANCEL</button>
                    <button type="button" class="button primary" id="confirm-action">CONFIRM</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Progress Pic Modal -->
    <div class="modal" id="progress-pic-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Progress Picture</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="progress-pic-form">
                    <div class="form-group">
                        <input type="date" id="pic-date" required>
                        <label for="pic-date">Date</label>
                    </div>
                    
                    <div class="form-group">
                        <select id="pic-category" required>
                            <option value="front">Front View</option>
                            <option value="back">Back View</option>
                            <option value="side">Side View</option>
                            <option value="other">Other</option>
                        </select>
                        <label for="pic-category">Category</label>
                    </div>
                    
                    <div class="form-group">
                        <textarea id="pic-notes" placeholder="Add any notes about this picture..."></textarea>
                        <label for="pic-notes">Notes (optional)</label>
                    </div>
                    
                    <div class="form-group">
                        <label for="pic-upload">Upload Picture</label>
                        <input type="file" id="pic-upload" accept="image/*" capture="user" required>
                        <div class="upload-preview">
                            <img id="upload-preview-img" src="" alt="Preview" class="hidden">
                            <div id="upload-placeholder" class="upload-placeholder">
                                <i class="fas fa-camera"></i>
                                <p>Click here to take a photo or select from your device</p>
                            </div>
                        </div>
                        <div class="form-hint">Click on the box above to select an image</div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="button secondary" id="cancel-progress-pic">CANCEL</button>
                        <button type="button" class="button primary" id="save-progress-pic">SAVE</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Progress Pic Detail Modal -->
    <div class="modal" id="pic-detail-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="pic-detail-date">Date</h2>
                <div class="modal-actions">
                    <button class="icon-button" id="delete-pic">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="close-modal">&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="pic-detail-image">
                    <img id="pic-detail-img" src="" alt="Progress Picture">
                </div>
                
                <div class="pic-detail-info">
                    <div class="info-item">
                        <span class="info-label">Category:</span>
                        <span id="pic-detail-category">Front View</span>
                    </div>
                    
                    <div class="info-item" id="pic-detail-notes-container">
                        <span class="info-label">Notes:</span>
                        <p id="pic-detail-notes"></p>
                    </div>
                </div>
                
                <button type="button" class="button secondary full-width" id="back-to-pics">Back to All Pictures</button>
            </div>
        </div>
    </div>
    
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.1.0/dist/chartjs-plugin-annotation.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script>
        // Make sure Chart.js is loaded before continuing
        if (!window.Chart) {
            console.error('Chart.js failed to load!');
        } else {
            console.log('Chart.js loaded successfully');
        }
    </script>
    
    <!-- Application JavaScript - Ensure proper load order for dependencies -->
    <!-- Core modules - These need to load first -->
    <script src="js/data.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/animations.js"></script>
    
    <!-- Feature modules - These can load after core modules -->
    <script src="js/templates.js"></script>
    <script src="js/exercises.js"></script>
    <script src="js/workout.js"></script>
    <script src="js/stats.js"></script>
    <script src="js/progress.js"></script>
    <script src="js/history.js"></script>
    <script src="js/weight.js"></script>
    <script src="js/progress-pics.js"></script>
    <script src="js/goals.js"></script>
    <script src="js/visualizations.js"></script>
    
    <!-- Main application - Loads after all modules are available -->
    <script src="js/app.js"></script>
</body>
</html>